# JavaScriptの基礎学習
実際にコードを書き込みながら、JavaScriptの基礎を学習する。

## 四則演算・文字列の連結
data.js

- console.log(): ()内の文字列や計算を出力
  - `''`で数字を囲むと文字列として扱う
  - 文字列を`+`で連結可能

- 演算記号
  - 足し算: `+`
  - 引き算: `-`
  - 掛け算: `*`
  - 割り算: `/`
  - 割り算後の余った数字を求める: `%`

## 変数
variable.js

### 変数宣言

- 変数を作るときは変数宣言を行う。
- 変数の宣言は`let 変数名;`とする。
  (PHPと違い、変数名の頭に`$`は不要)
```
let 変数名;
```

### 値の代入

- 変数へ値を代入するときは、`変数名 = '代入する値';`とする。
- 代入する値は数字なら`''`は不要だが、文字列の場合`''`が必要。
```
変数名 = '代入する値';
```

- 変数の宣言と値の代入は同時に行うことが可能
```
let 変数名 = `代入する値`;
```

- 値の再代入: 値に再代入すると、変数に格納される値は更新される(上書きされる)

### 変数の命名規則
変数はどのような名前を付けても動作するが、誰が見ても内容がわかる変数名にすることが基本。
覚えておくべき命名規則は以下のとおり。

1. 変数名はキャメルケースで記述する
  キャメルケースとは、アルファベットで複合語を記述する際に、各単語の先頭を大文字で書く方法
  - ローワーキャメルケース: 2つ目以降の単語の先頭を大文字にする
    例： camelCase, userName, userNumber
  
  - アッパーキャメルケース（パスカルケース）：1つ目の単語の先頭も大文字にする
    例： CamelCase, UserName, UserNumber

2. 変数の中身がわかるような名前にする
  ユーザー名であればuserName、年齢であればageなど、内容がわかる名前にする。
  中身がわからないアルファベットの羅列(例:xyz)、長すぎる名前は避ける。
  また、変数名は英語で記述する。

3. 予約語は使えない
  予約語とは、プログラミング言語において、あらかじめ意味が定義されている単語のこと。
  例えば"let"など。letは変数を定義する際に使用する単語として定義されている予約語。

## 定数
constant.js

### 定数の宣言
- 定数は`const 定数名;`で宣言する
- 定数は変数と違って値の再代入は不可(再代入しようとするとエラーになる)

## 条件分岐
if-switch.js

### 比較演算子の戻り値
算術演算子(`+`とか`-`とか)を使うと、計算結果を返す。
比較演算子(`>`、`<`、`==`、`===`)を使うと、戻り値はboolean型、つまり`true`か`false`かを返す。

### 等価演算子と厳密等価演算子
値が等しいかどうかを比べる等価演算子には、2種類ある。

- 等価演算子: `==`と記載し、2つの値が等しい場合に`true`を返す。
- 厳密等価演算子: `===`と記載し、値に加えてデータ型も等しければ`true`を返す。

```
console.log('5' == 5);  // true
console.log('5' === 5); // false
```

### if文
設定した条件が成り立つ場合に、処理を行う。

- if文の書き方
```
if (条件式A) {
  条件式Aが成り立つときの処理
} else if (条件式B) {
  条件式Bが成り立つときの処理
} else {
  どの条件も成り立たないときの処理
}
```

### switch文

式の値によって処理を切り替えて実行する。
3つ以上の値をとり、それぞれの処理を切り替えたいときに使われる。

- switch文の書き方
```
switch (式) {
  case 値1:
    式が値1のときの処理
    break;
  case 値2:
    式が値2のときの処理
    break;
  case 値3:
    式が値3のときの処理
    break;
  default:
    式がいずれのcaseにも当てはまらないときの処理
    break;
}
```

それぞれのケースに`break;`を記載することを忘れないようにする。
記載がないと、続けて次の処理を実行してしまう(切り替えになってない)。

- `Math.random()`: 0~1の間のランダムな数字を出力する
- `Math.floor()` : ()内の数字に小数点があれば、切り捨てる。
  ちなみに切り上げは`Math.ceil()`。
  四捨五入は`Math.round()`。

### 条件式に使う比較演算子
- `==`  : 2つの値が等しい場合に`true`を返す
- `===` : 2つの値とデータ型が等しい場合に`true`を返す
- `!=`  : 2つの値が等しくない場合に`true`を返す
- `!==` : 2つの値とデータ型が等しくない場合に`true`を返す
- `>`   : 左辺の値が右辺の値より大きい場合に`true`を返す
- `>=`  : 左辺の値が右辺の値以上場合に`true`を返す(等しい場合も含む)
- `<`   : 左辺の値が右辺の値より小さい場合に`true`を返す
- `<=`  : 左辺の値が右辺の値以下の場合に`true`を返す(等しい場合も含む)

## 繰り返し処理
loop.js

### while文

while文は、「条件を満たしている間、同じ処理を繰り返す」ときに利用する。

- while文の書き方

```
while (条件式) {
  条件を満たしている間、繰り返す処理
}
```

繰り返し処理は、いつか条件式がfalseを返す可能性があるように記述する必要がある。
そうしなければ「無限ループ」が発生する。
仮に無限ループが発生したら、ブラウザはすぐに強制終了させる必要がある。

### for文

for文は、「決まった回数同じ処理を繰り返す」ときに利用する

- for文の書き方
```
for (カウンタ変数の初期値; 条件式; カウンタ変数の増減値) {
  カウンタ変数が決まった値になるまで繰り返す処理
}
```

## 配列
array.js

配列は、複数のデータのまとまり。
配列を使うことで、複数のデータを1つにまとめられる。

配列は定数の`const`を使って、「配列の宣言」を行う。
配列は定数として宣言するが、中身の入れ替えは可能(再代入ではない)。
ただし、配列の中身を丸ごと変えようとすると、再代入にあたるのでエラーとなる。

例
```
const userNames = ['太郎', '一郎', '二郎'];
userNames = ['花子’, '一女']; // エラー
```

### 配列の宣言
```
const 配列名 = [値1, 値2, ....];
```

配列には複数のデータが入るため、一般的に配列名は複数形にする。
配列に入っている値のことを「要素」という。

配列の要素には、順番に「インデックス」という順序ごとに番号が割り振られる。
インデックスの値は「0」から始まるので注意。(2番目の値には「1」が割り振られる)

配列名を取り出すには、`配列名[インデックス]`として指定する。
配列とインデックスを記入して、配列にデータを追加したり更新したりできる。
```
配列名[1] = 値 // 2番目の値が更新される。
配列名[今あるインデックス+1] = 値 // 配列の末尾に新たにデータが追加される。
```

## オブジェクト
object.js

オブジェクトは、配列におけるインデックスの代わりに「キー」と呼ばれるラベルをつけて管理するデータのまとまり。
配列と違い、値に名前を付けて管理できる。

なお、他のプログラミング言語では「連想配列」と呼ばれたりする。

### プロパティ

オブジェクトにおけるキーと値のセットのことを「プロパティ」と呼ぶ。
配列と同じように、要素と呼ばれることもある。

### オブジェクトの宣言

配列と同様、定数として宣言する。
書き方は以下のとおり。

```
const オブジェクト名 = {キー1: 値1, キー2: 値2, キー3: 値3, ...};
```

### オブジェクトの値の取り出し方

1. ブラケット記法: `オブジェクト名['キー名']`
  キー名はシングルクオテーションもしくはダブルクオテーションで囲む。
2. ドット記法: `オブジェクト名.キー名`

一般的にはドット記法のほうが多い。

配列と同様、更新・追加できる。
代入したキー名があれば、更新、なければ新しいプロパティがオブジェクトの末尾に追加される。

オブジェクトも配列と同様、定数として宣言されるが、中身の入れ替えは可能だが、丸ごと入れ替えは再代入にあたるのでエラーとなる。

## 関数
function.js

関数とは、一連の処理をひとまとめにして何度でも再利用できるようにする仕組み。

JavaScriptにおける関数は関数自体を変数や定数に代入できる。
関数を再代入することはないため、一般的には定数に代入。

### 関数の作り方
- アロー関数
```
const 定数名 = () => {
  一連の処理
}
```
- 関数宣言
```
function 関数名() {
  一連の処理
}
```

### 関数名のつけ方
基本は「動詞 + 目的語」の形が多い

例：
- 商品を追加する                   addProduct
- 商品を削除する                   removeProduct
- 商品が存在するか確認する         hasProduct
- 購入されたかどうか確認する       isPurchased
- ボタンが押されたときに処理を行う onPushedButton

### 関数の呼び出し方

関数を呼び出す(実行する)には、関数名を記載するだけでOK。
関数は呼び出して初めて実行される(定義するだけでは実行されない)。


### 引数

関数に与えるデータのこと。
決まっていない値を使って処理を行うときは、引数が必要。

引数として関数に値を与えることで、関数は処理を行える。

#### 引数の使い方
- アロー関数の場合
```
const 定数名 = (引数名) => {
  引数を使った一連の処理
}
```
- 関数宣言の場合
```
function 関数名(引数名) {
  引数を使った一連の処理
}
```

### 戻り値

関数の中で処理した結果のこと。


### スコープ

変数や定数を使える範囲のこと。
関数の中で宣言した変数や定数はその関数の中でのみ有効。

スコープを意識して変数や定数を使う必要がある。
スコープ外の変数や定数を使うとエラーが発生する。

## クラス
class.js

クラスとはモノ(オブジェクト)の設計図
クラス（設計図）を作れば、同じ特徴を持った別のオブジェクトを大量に作る際に便利。

### インスタンス

クラスをもとに作られたオブジェクトのことを「インスタンス」と呼ぶ。
クラスをもとにインスタンスを作ることをインスタンス化という。

### クラスの作り方
```
class クラス名 {
  クラスの特徴
}
```
クラス名は慣習的に先頭を大文字で記述する。

### インスタンス化の方法
```
const shampoo = new Product();
```

### コンストラクタ

クラスをもとにオブジェクトを作る（インスタンス化する）際に処理を行う関数のこと。
コンストラクタによって実行される最初の処理のことを「初期化」という。

```
class Product {
  constructor() {
    初期化の内容
  }
}
```

### メソッド

オブジェクトが持つ関数のこと。

```
class クラス名 {
  constructor() {
    初期化の内容
  }

  // メソッドの定義
  メソッド名() {
    一連の処理
  }
}
```

メソッドを呼び出すときは`オブジェクト名.メソッド名()`と記述。

#### 通常のオブジェクトにメソッドを定義する方法

通常のオブジェクトとは、キー名で複数のデータを管理する配列のようなもののこと
(他言語で連想配列と呼ぶことも)

通常のオブジェクトにメソッドを定義する方法は以下の通り。
```
const 定数名 = {
  キー名(メソッド名) : () => {
    一連の処理
  }
}
```

メソッドを呼び出すときは、上記と同様に`オブジェクト名.メソッド名()`と記述。

## DOM

DOMはDocument Object Modelの略称。  
HTMLドキュメントをオブジェクトのように扱える仕組み。

DOMを使ってJavaScriptからHTML要素を取得・作成・更新・削除といった操作が可能。
この操作を「DOM操作」と呼ぶ。

HTMLファイルを読み込んで、掲載された要素の構成を「DOMツリー」と呼ぶ。
DOMツリーを構成する各要素は「ノード」と呼ばれる。

JavaScriptのDOM操作で使う`document`というオブジェクトは、`html`の上にある。

DOM操作の仕組みは以下の通り。
1. ブラウザがHTMLファイルを読み込み、DOMツリーを生成する。
2. DOMツリーが生成されると、`document`オブジェクトが使えるようになる。
3. `document`オブジェクトを使うと、JavaScriptでDOM操作が可能となる。

### HTML要素の中身を取得する方法
```
document.HTML要素名
```

### 補足: windowオブジェクトについて

`document`オブジェクトより更に上の階層に`window`オブジェクトが存在する。
`document`オブジェクトは`window`オブジェクトの中にあるが、`window`の記述は省略できる。

`console.log()`メソッドも`window`オブジェクトの中に存在する。
なので、正式には`window.console.log()`となる。

### DOM操作の方法

DOM操作を行うには、「どのHTML要素」を動かすか「捜査の対象」を取得する必要がある。
HTML要素の取得には、`document`オブジェクトのメソッドを使うことで、細かく指定が可能。

HTML要素を取得するための主なメソッドは以下の通り。

- `getElementById()`: HTML要素をidで取得する
- `getElementsByClassName()`: HTML要素をclassで取得する
  idと違って、classは複数の要素となる可能性があるので、`Elements`と複数形となっている。
- `querySelector()`: HTML要素をCSSセレクタで取得する(最初の1つ)
- `querySelectorAll()`: HTML要素をCSSセレクタで取得する(すべて)

#### 複数のHTML要素を1つずつ取得する方法

- `HTMLcollection`: HTML要素を複数取得したときに返ってくる配列風の戻り値。
- `length`プロパティ: 文字列の文字数や配列の要素数を取得するプロパティ。
  `length`プロパティは`HTMLcollection`にも使用可能。

`HTMLcollection`の長さをfor文の条件式にして、HTML要素の数だけ繰り返し処理を行う。
```
// 複数のHTML要素を取得し、定数に代入する
const cssHeadings = document.querySelectorAll('.heading');
const cssLists = document.querySelectorAll('li');

// 複数のHTML要素を1つずつ取得し、中身を出力する
for (let i = 0; i < cssHeadings.length; i++) {
  console.log(cssHeadings[i]);
}
for (let i = 0; i < cssLists.length; i++) {
  console.log(cssLists[i]);
}
```
### HTML要素を作成
要素やテキストを作成するメソッドやプロパティ
- `createElement()`メソッド: HTML要素を新しく作成

```
// 新しくli要素を作成し、定数に代入
const li = document.createElement('li');
```

- `textContent`/`innerHTML`プロパティ: HTML要素にテキストを追加
`innerHTML`は文字列に加えてHTMLタグも記述可能

```
// 上記createElementで作成したli要素にテキストを追加
//textContentの場合
li.textContent = 'JavaScript'で新しく作成したリスト';

// innerHTMLの場合
li.innerHTML = '<a href="#">JavaScriptで新しく作成したリスト</a>
```

上記では定数に代入しただけなので、ブラウザには変化なし。
ブラウザに表示させるには作成したHTML要素を`document`オブジェクトに追加する必要がある。

- `appendChild()`メソッド: 作成したHTML要素を子要素として末尾に追加
```
// ul要素の末尾にli要素を追加する
document.querySelector('ul').appendChild(li);
```

## イベント
event.html
event.js

## イベント（スクロール）
scroll.html
scroll.js

## 非同期処理
async.html
async.js